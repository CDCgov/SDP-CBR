10:54:16.719 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] 
10:54:16.769 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4961f6af, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5aebe890, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@65d09a04, org.springframework.test.context.support.DirtiesContextTestExecutionListener@33c911a1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@75db5df9, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@707194ba, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@1190200a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6a2f6f80, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@45b4c3a9, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@399c4be1, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@291caca8, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@385e9564] 
10:54:17.081 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [EmailOnException.xml] 
10:54:19.434 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:19.473 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@740773a3: startup date [Wed Oct 18 10:54:19 EDT 2017]; root of context hierarchy 
10:54:19.660 [main] INFO  o.a.c.s.s.BridgePropertyPlaceholderConfigurer - Loading properties file from class path resource [application.properties] 
10:54:19.673 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:20.657 [main] INFO  o.a.c.spring.CamelContextFactoryBean - Bridging Camel and Spring property placeholder configurer with id: bridgePropertyPlaceholder 
10:54:20.942 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:20.948 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:20.950 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:20.952 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:21.107 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:23.178 [main] INFO  o.a.camel.spring.SpringCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html 
10:54:23.245 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: email_sending_test_route started and consuming from: direct://start 
10:54:23.286 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: email_sending_test_route_sql2 started and consuming from: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId 
10:54:23.290 [main] INFO  o.a.camel.spring.SpringCamelContext - Total 2 routes, of which 2 are started. 
10:54:23.291 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) started in 2.340 seconds 
10:54:23.443 [main] INFO  gov.cdc.sdp.cbr.EmailOnExceptionTest - ******************************************************************************** 
10:54:23.450 [main] INFO  gov.cdc.sdp.cbr.EmailOnExceptionTest - Testing done: noS3AtUriTest(gov.cdc.sdp.cbr.EmailOnExceptionTest) 
10:54:23.451 [main] INFO  gov.cdc.sdp.cbr.EmailOnExceptionTest - Took: 0.133 seconds (133 millis) 
10:54:23.451 [main] INFO  gov.cdc.sdp.cbr.EmailOnExceptionTest - ******************************************************************************** 
10:54:23.538 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] 
10:54:23.540 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2aaf152b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@39bbd9e0, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@27fe9713, org.springframework.test.context.support.DirtiesContextTestExecutionListener@11c3ff67, org.springframework.test.context.transaction.TransactionalTestExecutionListener@4397a639, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@24841372, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@77114efe, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@79a7bfbc, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@77f68df, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3e4e4c1, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7e7f3cfd, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@3ae126d1] 
10:54:23.546 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [AphlS3ComponentTest-context.xml] 
10:54:24.315 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:24.350 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:24.351 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@46a488c2: startup date [Wed Oct 18 10:54:24 EDT 2017]; root of context hierarchy 
10:54:24.390 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:24.525 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:24.526 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:24.527 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:24.528 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:24.535 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:24.650 [main] INFO  o.a.camel.spring.SpringCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html 
10:54:24.657 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: aphls3_test_route started and consuming from: direct://aphls3 
10:54:24.657 [main] INFO  o.a.camel.spring.SpringCamelContext - Total 1 routes, of which 1 are started. 
10:54:24.658 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) started in 0.131 seconds 
10:54:24.734 [main] WARN  c.a.services.s3.AmazonS3Client - No content length specified for stream data.  Stream contents will be buffered in memory and could result in out of memory errors. 
10:54:24.830 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:25.339 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:25.699 [main] INFO  aphls3_test_route - EXCEPTION  com.amazonaws.SdkClientException: Unable to execute HTTP request: Connect to 127.0.0.1:8000 [/127.0.0.1] failed: Connection refused (Connection refused)	at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleRetryableException(AmazonHttpClient.java:1069)	at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1035)	at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:742)	at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:716)	at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:699)	at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:667)	at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:649)	at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:513)	at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4221)	at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4168)	at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1718)	at gov.cdc.sdp.cbr.aphl.AphlS3Producer.processSingleOp(AphlS3Producer.java:212)	at gov.cdc.sdp.cbr.aphl.AphlS3Producer.process(AphlS3Producer.java:78)	at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145)	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120)	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83)	at org.apache.camel.processor.TryProcessor.process(TryProcessor.java:113)	at org.apache.camel.processor.TryProcessor.process(TryProcessor.java:84)	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62)	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97)	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529)	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497)	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365)	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497)	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209)	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139)	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374)	at gov.cdc.sdp.cbr.aphl.AphlS3ComponentTest.testAphlS3Route(AphlS3ComponentTest.java:78)	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)	at java.lang.reflect.Method.invoke(Method.java:498)	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)Caused by: org.apache.http.conn.HttpHostConnectException: Connect to 127.0.0.1:8000 [/127.0.0.1] failed: Connection refused (Connection refused)	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)	at java.lang.reflect.Method.invoke(Method.java:498)	at com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76)	at com.amazonaws.http.conn.$Proxy54.connect(Unknown Source)	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)	at com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72)	at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1190)	at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1030)	... 60 moreCaused by: java.net.ConnectException: Connection refused (Connection refused)	at java.net.PlainSocketImpl.socketConnect(Native Method)	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)	at java.net.Socket.connect(Socket.java:589)	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)	... 76 more 
10:54:25.707 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://foo is satisfied 
10:54:25.844 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:26.348 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:26.852 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:27.355 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:27.860 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:28.365 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:28.869 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:29.373 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:29.876 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:30.380 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:30.890 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:31.396 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:31.903 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:32.410 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:32.931 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:33.433 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:33.939 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:34.447 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:34.950 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:35.454 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:35.710 [main] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@46a488c2: startup date [Wed Oct 18 10:54:24 EDT 2017]; root of context hierarchy 
10:54:35.711 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:54:35.712 [main] INFO  o.a.c.impl.DefaultShutdownStrategy - Starting to graceful shutdown 1 routes (timeout 10 seconds) 
10:54:35.724 [Camel (camel) thread #1 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: aphls3_test_route shutdown complete, was consuming from: direct://aphls3 
10:54:35.745 [main] INFO  o.a.c.impl.DefaultShutdownStrategy - Graceful shutdown of 1 routes completed in 0 seconds 
10:54:35.817 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 11.291 seconds 
10:54:35.817 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.106 seconds 
10:54:35.825 [main] INFO  g.c.sdp.cbr.aphl.AphlS3ComponentTest - ******************************************************************************** 
10:54:35.826 [main] INFO  g.c.sdp.cbr.aphl.AphlS3ComponentTest - Testing done: testAphlS3Route(gov.cdc.sdp.cbr.aphl.AphlS3ComponentTest) 
10:54:35.826 [main] INFO  g.c.sdp.cbr.aphl.AphlS3ComponentTest - Took: 11.157 seconds (11157 millis) 
10:54:35.826 [main] INFO  g.c.sdp.cbr.aphl.AphlS3ComponentTest - ******************************************************************************** 
10:54:35.938 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] 
10:54:35.947 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@26ca61bf, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@73a0f2b, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@fa5f81c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6a1d526c, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1f2f0109, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@483b0690, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@687e6293, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6870c3c2, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@fb0a08c, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@1faf386c, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@4debbf0, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6a5e167a] 
10:54:35.948 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [LogComponentTest-context.xml] 
10:54:35.957 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:36.459 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:36.718 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:36.723 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@60e06f7d: startup date [Wed Oct 18 10:54:36 EDT 2017]; root of context hierarchy 
10:54:36.739 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:36.961 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:37.093 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c]. 
10:54:37.094 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c]. 
10:54:37.094 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) is starting 
10:54:37.094 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:37.107 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:37.221 [main] INFO  o.a.camel.spring.SpringCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html 
10:54:37.250 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _route1 started and consuming from: direct://start 
10:54:37.266 [main] INFO  o.a.camel.spring.SpringCamelContext - Total 1 routes, of which 1 are started. 
10:54:37.266 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) started in 0.172 seconds 
10:54:37.484 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:37.987 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:38.488 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:38.742 [main] INFO  SDPLogLogger - MISSING HEADER SOURCE 
10:54:38.744 [main] INFO  SDPLogLogger - MISSING HEADER SOURCE_ID 
10:54:38.745 [main] INFO  SDPLogLogger - MISSING HEADER BATCH 
10:54:38.745 [main] INFO  SDPLogLogger - MISSING HEADER BATCH_INDEX 
10:54:38.989 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:39.498 [main] INFO  SDPLogLogger - MISSING HEADER SOURCE 
10:54:39.501 [main] INFO  SDPLogLogger - MISSING HEADER SOURCE_ID 
10:54:39.501 [main] INFO  SDPLogLogger - MISSING HEADER BATCH 
10:54:39.501 [main] INFO  SDPLogLogger - MISSING HEADER BATCH_INDEX 
10:54:39.496 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:39.530 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://foo is satisfied 
10:54:40.004 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:40.510 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:40.620 [main] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@60e06f7d: startup date [Wed Oct 18 10:54:36 EDT 2017]; root of context hierarchy 
10:54:40.621 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) is shutting down 
10:54:40.621 [main] INFO  o.a.c.impl.DefaultShutdownStrategy - Starting to graceful shutdown 1 routes (timeout 10 seconds) 
10:54:40.634 [Camel (camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) thread #2 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _route1 shutdown complete, was consuming from: direct://start 
10:54:40.635 [main] INFO  o.a.c.impl.DefaultShutdownStrategy - Graceful shutdown of 1 routes completed in 0 seconds 
10:54:40.642 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) uptime 3.548 seconds 
10:54:40.643 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) is shutdown in 0.021 seconds 
10:54:40.644 [main] INFO  gov.cdc.sdp.cbr.log.LogComponentTest - ******************************************************************************** 
10:54:40.646 [main] INFO  gov.cdc.sdp.cbr.log.LogComponentTest - Testing done: testLogFunctionality(gov.cdc.sdp.cbr.log.LogComponentTest) 
10:54:40.647 [main] INFO  gov.cdc.sdp.cbr.log.LogComponentTest - Took: 3.341 seconds (3341 millis) 
10:54:40.658 [main] INFO  gov.cdc.sdp.cbr.log.LogComponentTest - ******************************************************************************** 
10:54:40.693 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] 
10:54:40.695 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@f171912, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7d4d8579, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@159424e2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@29bcf51d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1e54a6b1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@f238e4f, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@3b24087d, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@75fe1619, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@4e245739, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@5d66e944, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@469a7575, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@4351ed61] 
10:54:40.704 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [SDPMessageIdRepositoryTest-context.xml] 
10:54:41.011 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:41.254 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:41.255 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@2f20f7ad: startup date [Wed Oct 18 10:54:41 EDT 2017]; root of context hierarchy 
10:54:41.310 [main] INFO  o.a.c.s.s.BridgePropertyPlaceholderConfigurer - Loading properties file from class path resource [application.properties] 
10:54:41.315 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:41.380 [main] ERROR g.cdc.sdp.cbr.SDPMessageIdRepository - Cannot initialize -- SQL error creating table. org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.SDPMessageIdRepository.createIfNotExists(SDPMessageIdRepository.java:37) 	at gov.cdc.sdp.cbr.SDPMessageIdRepository.<init>(SDPMessageIdRepository.java:29) 	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) 	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 	at java.lang.reflect.Constructor.newInstance(Constructor.java:423) 	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:142) 	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:122) 	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:271) 	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1148) 	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1051) 	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510) 	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) 	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) 	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) 	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) 	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) 	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:751) 	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861) 	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:150) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:87) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116) 	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) 	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 51 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 59 common frames omitted 
10:54:41.451 [main] INFO  o.a.c.spring.CamelContextFactoryBean - Bridging Camel and Spring property placeholder configurer with id: bridgePropertyPlaceholder 
10:54:41.513 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:41.588 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:41.601 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:41.602 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:41.603 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:41.618 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:41.734 [main] INFO  o.a.camel.spring.SpringCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html 
10:54:41.735 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: PHINMS started and consuming from: direct://start 
10:54:41.741 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: foodNetFilter started and consuming from: direct://idempotence 
10:54:41.742 [main] INFO  o.a.camel.spring.SpringCamelContext - Total 2 routes, of which 2 are started. 
10:54:41.742 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) started in 0.140 seconds 
10:54:41.791 [main] ERROR g.cdc.sdp.cbr.SDPMessageIdRepository - Cannot delete from testIdTable org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.SDPMessageIdRepository.delete(SDPMessageIdRepository.java:61) 	at gov.cdc.sdp.cbr.SDPMessageIdRepositoryTest.tearDown(SDPMessageIdRepositoryTest.java:161) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 32 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 40 common frames omitted 
10:54:41.799 [main] INFO  g.c.s.cbr.SDPMessageIdRepositoryTest - ******************************************************************************** 
10:54:41.800 [main] INFO  g.c.s.cbr.SDPMessageIdRepositoryTest - Testing done: testIdempotenceOverShutdown(gov.cdc.sdp.cbr.SDPMessageIdRepositoryTest) 
10:54:41.800 [main] INFO  g.c.s.cbr.SDPMessageIdRepositoryTest - Took: 0.033 seconds (33 millis) 
10:54:41.800 [main] INFO  g.c.s.cbr.SDPMessageIdRepositoryTest - ******************************************************************************** 
10:54:41.870 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-3-1 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-3-2). Exhausted after delivery attempt: 1 caught: org.springframework.transaction.CannotCreateTransactionException: Could not open JDBC Connection for transaction; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[PHINMS            ] [PHINMS            ] [                                                                              ] [        50][PHINMS            ] [setHeaders        ] [ref:myProcessor                                                               ] [        26][PHINMS            ] [_to1              ] [direct:idempotence                                                            ] [        32][foodNetFilter     ] [_idempotentConsume] [idempotentConsumer[header{header(CBR_ID)}]                                    ] [        19]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.springframework.transaction.CannotCreateTransactionException: Could not open JDBC Connection for transaction; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:245) 	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) 	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:130) 	at org.apache.camel.processor.idempotent.jdbc.AbstractJdbcMessageIdRepository.add(AbstractJdbcMessageIdRepository.java:128) 	at org.apache.camel.processor.idempotent.IdempotentConsumer.process(IdempotentConsumer.java:130) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.SDPMessageIdRepositoryTest.testIdempotenceInMemory(SDPMessageIdRepositoryTest.java:144) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:204) 	... 55 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 58 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 66 common frames omitted 
10:54:41.886 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-3-3 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-3-4). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerExceptionMessage History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[PHINMS            ] [PHINMS            ] [                                                                              ] [         0][PHINMS            ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- java.lang.NullPointerException: null 	at gov.cdc.sdp.cbr.PhinMSTransformer.process(PhinMSTransformer.java:34) 	at org.apache.camel.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:63) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.SDPMessageIdRepositoryTest.testIdempotenceInMemory(SDPMessageIdRepositoryTest.java:151) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) 
10:54:41.902 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://idempotence is satisfied 
10:54:42.016 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:42.518 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:43.022 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:43.527 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:44.031 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:44.532 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:45.034 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:45.536 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:46.040 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:46.546 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:47.052 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:47.555 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:48.058 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:48.560 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:49.062 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:49.565 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:50.073 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:50.576 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:51.080 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:51.583 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:51.910 [main] ERROR g.cdc.sdp.cbr.SDPMessageIdRepository - Cannot delete from testIdTable org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.SDPMessageIdRepository.delete(SDPMessageIdRepository.java:61) 	at gov.cdc.sdp.cbr.SDPMessageIdRepositoryTest.tearDown(SDPMessageIdRepositoryTest.java:161) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 32 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 40 common frames omitted 
10:54:51.912 [main] INFO  g.c.s.cbr.SDPMessageIdRepositoryTest - ******************************************************************************** 
10:54:51.912 [main] INFO  g.c.s.cbr.SDPMessageIdRepositoryTest - Testing done: testIdempotenceInMemory(gov.cdc.sdp.cbr.SDPMessageIdRepositoryTest) 
10:54:51.912 [main] INFO  g.c.s.cbr.SDPMessageIdRepositoryTest - Took: 10.101 seconds (10101 millis) 
10:54:51.912 [main] INFO  g.c.s.cbr.SDPMessageIdRepositoryTest - ******************************************************************************** 
10:54:51.982 [main] INFO  g.c.s.c.q.DatabaseQueueCreationProducerTest - ******************************************************************************** 
10:54:51.982 [main] INFO  g.c.s.c.q.DatabaseQueueCreationProducerTest - Testing: testCreateProduce(gov.cdc.sdp.cbr.queue.DatabaseQueueCreationProducerTest) 
10:54:51.982 [main] INFO  g.c.s.c.q.DatabaseQueueCreationProducerTest - ******************************************************************************** 
10:54:51.983 [main] INFO  g.c.s.c.q.DatabaseQueueCreationProducerTest - ******************************************************************************** 
10:54:51.983 [main] INFO  g.c.s.c.q.DatabaseQueueCreationProducerTest - Testing done: testCreateProduce(gov.cdc.sdp.cbr.queue.DatabaseQueueCreationProducerTest) 
10:54:51.984 [main] INFO  g.c.s.c.q.DatabaseQueueCreationProducerTest - Took: 0.016 seconds (16 millis) 
10:54:51.984 [main] INFO  g.c.s.c.q.DatabaseQueueCreationProducerTest - ******************************************************************************** 
10:54:52.013 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] 
10:54:52.013 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@37e0056e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@415795f3, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2fe2965c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3375ebd3, org.springframework.test.context.transaction.TransactionalTestExecutionListener@40943a6, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@798cb6d9, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@42679fc2, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@5e50df2e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@100aa331, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@c2cf597, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@724bf25f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@2abafa97] 
10:54:52.014 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [DatabaseQueueComponentTest-context.xml] 
10:54:52.086 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:52.547 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:52.556 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@6f6cc7da: startup date [Wed Oct 18 10:54:52 EDT 2017]; root of context hierarchy 
10:54:52.594 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:52.635 [main] INFO  o.a.c.s.s.BridgePropertyPlaceholderConfigurer - Loading properties file from class path resource [application.properties] 
10:54:52.654 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:52.751 [main] INFO  o.a.c.spring.CamelContextFactoryBean - Bridging Camel and Spring property placeholder configurer with id: bridgePropertyPlaceholder 
10:54:52.891 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:52.892 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:52.898 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:52.906 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:52.976 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:53.095 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:53.216 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:54:53.243 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 0.345 seconds 
10:54:53.250 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.027 seconds 
10:54:53.259 [main] ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2fe2965c] to prepare test instance [gov.cdc.sdp.cbr.queue.DatabaseQueueComponentTest@6da54910] java.lang.IllegalStateException: Failed to load ApplicationContext 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) 	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) 	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route producer_test_route at: >>> To[sdpqueue:message_queue?dataSource=sdpqDataSource] <<< in route: Route(producer_test_route)[[From[direct:producer_test]] -> [... because of Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1071) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196) 	at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:984) 	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3401) 	at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3132) 	at org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:183) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2961) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2957) 	at org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2980) 	at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2957) 	at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61) 	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2924) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader$6.execute(CamelSpringTestContextLoader.java:491) 	at org.apache.camel.test.spring.CamelSpringTestHelper.doToSpringCamelContexts(CamelSpringTestHelper.java:92) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.handleCamelContextStartup(CamelSpringTestContextLoader.java:485) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:163) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:87) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116) 	... 25 common frames omitted Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:623) 	at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:79) 	at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:211) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:108) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:114) 	at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) 	at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) 	at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:539) 	at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:500) 	at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:221) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1068) 	... 43 common frames omitted Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createIfNotExists(DatabaseQueueComponent.java:55) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createEndpoint(DatabaseQueueComponent.java:78) 	at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:112) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:603) 	... 53 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 59 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 67 common frames omitted 
10:54:53.295 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [DatabaseQueueComponentTest-context.xml] 
10:54:53.606 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:53.651 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:53.651 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@1bd8afc8: startup date [Wed Oct 18 10:54:53 EDT 2017]; root of context hierarchy 
10:54:53.695 [main] INFO  o.a.c.s.s.BridgePropertyPlaceholderConfigurer - Loading properties file from class path resource [application.properties] 
10:54:53.707 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:53.826 [main] INFO  o.a.c.spring.CamelContextFactoryBean - Bridging Camel and Spring property placeholder configurer with id: bridgePropertyPlaceholder 
10:54:54.052 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:54.057 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:54.058 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:54.058 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:54.079 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:54.117 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:54.246 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:54:54.250 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 0.193 seconds 
10:54:54.251 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.004 seconds 
10:54:54.251 [main] ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2fe2965c] to prepare test instance [gov.cdc.sdp.cbr.queue.DatabaseQueueComponentTest@35563e4c] java.lang.IllegalStateException: Failed to load ApplicationContext 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) 	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) 	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route producer_test_route at: >>> To[sdpqueue:message_queue?dataSource=sdpqDataSource] <<< in route: Route(producer_test_route)[[From[direct:producer_test]] -> [... because of Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1071) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196) 	at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:984) 	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3401) 	at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3132) 	at org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:183) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2961) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2957) 	at org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2980) 	at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2957) 	at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61) 	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2924) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader$6.execute(CamelSpringTestContextLoader.java:491) 	at org.apache.camel.test.spring.CamelSpringTestHelper.doToSpringCamelContexts(CamelSpringTestHelper.java:92) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.handleCamelContextStartup(CamelSpringTestContextLoader.java:485) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:163) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:87) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116) 	... 25 common frames omitted Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:623) 	at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:79) 	at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:211) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:108) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:114) 	at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) 	at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) 	at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:539) 	at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:500) 	at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:221) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1068) 	... 43 common frames omitted Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createIfNotExists(DatabaseQueueComponent.java:55) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createEndpoint(DatabaseQueueComponent.java:78) 	at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:112) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:603) 	... 53 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 59 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 67 common frames omitted 
10:54:54.310 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [DatabaseQueueComponentTest-context.xml] 
10:54:54.619 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:54.732 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:54.732 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@6dd79214: startup date [Wed Oct 18 10:54:54 EDT 2017]; root of context hierarchy 
10:54:54.782 [main] INFO  o.a.c.s.s.BridgePropertyPlaceholderConfigurer - Loading properties file from class path resource [application.properties] 
10:54:54.786 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:54.863 [main] INFO  o.a.c.spring.CamelContextFactoryBean - Bridging Camel and Spring property placeholder configurer with id: bridgePropertyPlaceholder 
10:54:55.045 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:55.048 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:55.049 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:55.049 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:55.062 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:55.122 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:55.201 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:54:55.218 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 0.169 seconds 
10:54:55.221 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.017 seconds 
10:54:55.222 [main] ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2fe2965c] to prepare test instance [gov.cdc.sdp.cbr.queue.DatabaseQueueComponentTest@38c761e9] java.lang.IllegalStateException: Failed to load ApplicationContext 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) 	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) 	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route producer_test_route at: >>> To[sdpqueue:message_queue?dataSource=sdpqDataSource] <<< in route: Route(producer_test_route)[[From[direct:producer_test]] -> [... because of Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1071) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196) 	at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:984) 	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3401) 	at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3132) 	at org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:183) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2961) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2957) 	at org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2980) 	at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2957) 	at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61) 	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2924) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader$6.execute(CamelSpringTestContextLoader.java:491) 	at org.apache.camel.test.spring.CamelSpringTestHelper.doToSpringCamelContexts(CamelSpringTestHelper.java:92) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.handleCamelContextStartup(CamelSpringTestContextLoader.java:485) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:163) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:87) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116) 	... 25 common frames omitted Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:623) 	at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:79) 	at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:211) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:108) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:114) 	at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) 	at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) 	at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:539) 	at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:500) 	at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:221) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1068) 	... 43 common frames omitted Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createIfNotExists(DatabaseQueueComponent.java:55) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createEndpoint(DatabaseQueueComponent.java:78) 	at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:112) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:603) 	... 53 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 59 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 67 common frames omitted 
10:54:55.247 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [DatabaseQueueComponentTest-context.xml] 
10:54:55.629 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:55.915 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:55.918 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@1cee2e10: startup date [Wed Oct 18 10:54:55 EDT 2017]; root of context hierarchy 
10:54:55.978 [main] INFO  o.a.c.s.s.BridgePropertyPlaceholderConfigurer - Loading properties file from class path resource [application.properties] 
10:54:55.979 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:56.052 [main] INFO  o.a.c.spring.CamelContextFactoryBean - Bridging Camel and Spring property placeholder configurer with id: bridgePropertyPlaceholder 
10:54:56.131 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:56.208 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:56.208 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:56.209 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:56.209 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:56.227 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:56.321 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:54:56.332 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 0.123 seconds 
10:54:56.338 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.011 seconds 
10:54:56.338 [main] ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2fe2965c] to prepare test instance [gov.cdc.sdp.cbr.queue.DatabaseQueueComponentTest@5b7308aa] java.lang.IllegalStateException: Failed to load ApplicationContext 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) 	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) 	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route producer_test_route at: >>> To[sdpqueue:message_queue?dataSource=sdpqDataSource] <<< in route: Route(producer_test_route)[[From[direct:producer_test]] -> [... because of Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1071) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196) 	at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:984) 	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3401) 	at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3132) 	at org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:183) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2961) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2957) 	at org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2980) 	at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2957) 	at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61) 	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2924) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader$6.execute(CamelSpringTestContextLoader.java:491) 	at org.apache.camel.test.spring.CamelSpringTestHelper.doToSpringCamelContexts(CamelSpringTestHelper.java:92) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.handleCamelContextStartup(CamelSpringTestContextLoader.java:485) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:163) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:87) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116) 	... 25 common frames omitted Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:623) 	at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:79) 	at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:211) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:108) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:114) 	at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) 	at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) 	at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:539) 	at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:500) 	at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:221) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1068) 	... 43 common frames omitted Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createIfNotExists(DatabaseQueueComponent.java:55) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createEndpoint(DatabaseQueueComponent.java:78) 	at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:112) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:603) 	... 53 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 59 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 67 common frames omitted 
10:54:56.353 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [DatabaseQueueComponentTest-context.xml] 
10:54:56.638 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:56.914 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:56.916 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@42aa1324: startup date [Wed Oct 18 10:54:56 EDT 2017]; root of context hierarchy 
10:54:56.964 [main] INFO  o.a.c.s.s.BridgePropertyPlaceholderConfigurer - Loading properties file from class path resource [application.properties] 
10:54:56.969 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:57.051 [main] INFO  o.a.c.spring.CamelContextFactoryBean - Bridging Camel and Spring property placeholder configurer with id: bridgePropertyPlaceholder 
10:54:57.139 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:57.166 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:57.174 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:57.175 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:57.175 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:57.186 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:57.259 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:54:57.262 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 0.088 seconds 
10:54:57.263 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.003 seconds 
10:54:57.266 [main] ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2fe2965c] to prepare test instance [gov.cdc.sdp.cbr.queue.DatabaseQueueComponentTest@29c1249a] java.lang.IllegalStateException: Failed to load ApplicationContext 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) 	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) 	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route producer_test_route at: >>> To[sdpqueue:message_queue?dataSource=sdpqDataSource] <<< in route: Route(producer_test_route)[[From[direct:producer_test]] -> [... because of Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1071) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196) 	at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:984) 	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3401) 	at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3132) 	at org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:183) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2961) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2957) 	at org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2980) 	at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2957) 	at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61) 	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2924) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader$6.execute(CamelSpringTestContextLoader.java:491) 	at org.apache.camel.test.spring.CamelSpringTestHelper.doToSpringCamelContexts(CamelSpringTestHelper.java:92) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.handleCamelContextStartup(CamelSpringTestContextLoader.java:485) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:163) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:87) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116) 	... 25 common frames omitted Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:623) 	at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:79) 	at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:211) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:108) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:114) 	at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) 	at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) 	at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:539) 	at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:500) 	at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:221) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1068) 	... 43 common frames omitted Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createIfNotExists(DatabaseQueueComponent.java:55) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createEndpoint(DatabaseQueueComponent.java:78) 	at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:112) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:603) 	... 53 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 59 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 67 common frames omitted 
10:54:57.278 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [DatabaseQueueComponentTest-context.xml] 
10:54:57.640 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:57.743 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:54:57.747 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@5beb6be2: startup date [Wed Oct 18 10:54:57 EDT 2017]; root of context hierarchy 
10:54:57.841 [main] INFO  o.a.c.s.s.BridgePropertyPlaceholderConfigurer - Loading properties file from class path resource [application.properties] 
10:54:57.854 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:54:57.997 [main] INFO  o.a.c.spring.CamelContextFactoryBean - Bridging Camel and Spring property placeholder configurer with id: bridgePropertyPlaceholder 
10:54:58.142 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:58.195 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:54:58.196 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:54:58.196 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:54:58.197 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:54:58.203 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:58.272 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:54:58.274 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 0.077 seconds 
10:54:58.274 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.001 seconds 
10:54:58.274 [main] ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2fe2965c] to prepare test instance [gov.cdc.sdp.cbr.queue.DatabaseQueueComponentTest@53f495f0] java.lang.IllegalStateException: Failed to load ApplicationContext 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) 	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) 	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) 	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route producer_test_route at: >>> To[sdpqueue:message_queue?dataSource=sdpqDataSource] <<< in route: Route(producer_test_route)[[From[direct:producer_test]] -> [... because of Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1071) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196) 	at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:984) 	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3401) 	at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3132) 	at org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:183) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2961) 	at org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2957) 	at org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2980) 	at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2957) 	at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61) 	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2924) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader$6.execute(CamelSpringTestContextLoader.java:491) 	at org.apache.camel.test.spring.CamelSpringTestHelper.doToSpringCamelContexts(CamelSpringTestHelper.java:92) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.handleCamelContextStartup(CamelSpringTestContextLoader.java:485) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:163) 	at org.apache.camel.test.spring.CamelSpringTestContextLoader.loadContext(CamelSpringTestContextLoader.java:87) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98) 	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116) 	... 25 common frames omitted Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: sdpqueue://message_queue?dataSource=sdpqDataSource due to: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:623) 	at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:79) 	at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:211) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:108) 	at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:114) 	at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) 	at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) 	at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:539) 	at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:500) 	at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:221) 	at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1068) 	... 43 common frames omitted Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createIfNotExists(DatabaseQueueComponent.java:55) 	at gov.cdc.sdp.cbr.queue.DatabaseQueueComponent.createEndpoint(DatabaseQueueComponent.java:78) 	at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:112) 	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:603) 	... 53 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 59 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 67 common frames omitted 
10:54:58.319 [main] INFO  g.c.s.c.q.DatabaseQueueCreationConsumerTest - ******************************************************************************** 
10:54:58.319 [main] INFO  g.c.s.c.q.DatabaseQueueCreationConsumerTest - Testing: testCreateConsume(gov.cdc.sdp.cbr.queue.DatabaseQueueCreationConsumerTest) 
10:54:58.319 [main] INFO  g.c.s.c.q.DatabaseQueueCreationConsumerTest - ******************************************************************************** 
10:54:58.320 [main] INFO  g.c.s.c.q.DatabaseQueueCreationConsumerTest - ******************************************************************************** 
10:54:58.320 [main] INFO  g.c.s.c.q.DatabaseQueueCreationConsumerTest - Testing done: testCreateConsume(gov.cdc.sdp.cbr.queue.DatabaseQueueCreationConsumerTest) 
10:54:58.320 [main] INFO  g.c.s.c.q.DatabaseQueueCreationConsumerTest - Took: 0.001 seconds (1 millis) 
10:54:58.320 [main] INFO  g.c.s.c.q.DatabaseQueueCreationConsumerTest - ******************************************************************************** 
10:54:58.491 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:54:58.643 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:58.678 [main] INFO  ca.uhn.hl7v2.util.Home - hapi.home is set to /home/troy/project/SDP-CBR/. 
10:54:58.730 [main] INFO  ca.uhn.hl7v2.VersionLogger - HAPI version is: 2.2 
10:54:58.735 [main] INFO  ca.uhn.hl7v2.VersionLogger - Default Structure libraries found for HL7 versions 2.1, 2.2, 2.3, 2.3.1, 2.4, 2.5, 2.5.1, 2.6,  
10:54:59.144 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:54:59.494 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:[[PID-5-1 EQUALS JONES] AND [PID-5-2 EQUALS MARY]] AND [*([OBSERVATION(*)/OBX-3-2 CONTAINS Pregnancy] AND [OBSERVATION(*)/OBX-5-1 EQUALS N]) OR *([OBSERVATION(*)/OBX-3-2 CONTAINS Patient Age] AND [OBSERVATION(*)/OBX-5-1 MINIMUM 50])] 
10:54:59.645 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:00.150 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:00.193 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:[[PID-5-1 EQUALS JONES] AND [PID-5-2 EQUALS MARY]] AND [*([OBSERVATION(*)/OBX-3-2 CONTAINS Pregnancy] AND [OBSERVATION(*)/OBX-5-1 EQUALS Y]) OR *([OBSERVATION(*)/OBX-3-2 CONTAINS Patient Age] AND [OBSERVATION(*)/OBX-5-1 MINIMUM 50])] 
10:55:00.224 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:00.375 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:PID-5-1 CONTAINS MI 
10:55:00.377 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:PID-5-1 CONTAINS JONES 
10:55:00.395 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:00.423 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:[PID-5-1 EQUALS SMITH] AND [PID-5-1 NOT_EQUALS JONES] 
10:55:00.438 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:[PID-5-1 NOT_EQUALS JONES] OR [PID-5-1 NOT_EQUALS SMITH] 
10:55:00.455 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:[PID-5-1 NOT_EQUALS SMITH] OR [PID-5-1 CONTAINS MI] 
10:55:00.484 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:[PID-5-1 NOT_EQUALS SMITH] OR [PID-5-1 NOT_CONTAINS MI] 
10:55:00.505 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:00.654 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:00.636 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:*([OBSERVATION(*)/OBX-3-2 CONTAINS Pregnancy] AND [OBSERVATION(*)/OBX-5-1 EQUALS N]) 
10:55:01.062 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:*([OBSERVATION(*)/OBX-3-2 CONTAINS Pregnancy] AND [OBSERVATION(*)/OBX-5-1 EQUALS Y]) 
10:55:01.067 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:01.071 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:PID-5-1 NOT_EQUALS JONES 
10:55:01.072 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:PID-5-1 NOT_EQUALS SMITH 
10:55:01.082 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:01.086 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:PID-5-1 NOT_CONTAINS JJ 
10:55:01.088 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:PID-5-1 NOT_CONTAINS MI 
10:55:01.100 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:PID-5-1 NOT_CONTAINS SMITH 
10:55:01.105 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:01.126 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:PID-5-1 EQUALS SMITH 
10:55:01.129 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:PID-5-1 EQUALS SMITH2 
10:55:01.131 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:PID-5-1 EQUALS SMI 
10:55:01.142 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:01.144 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:[PID-5-1 EQUALS SMITH] AND [PID-5-1 EQUALS SMITH] 
10:55:01.158 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:01.147 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:[PID-5-1 EQUALS SMITH] AND [PID-5-1 EQUALS JONES] 
10:55:01.168 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:[PID-5-1 EQUALS JONES] AND [PID-5-1 EQUALS SMITH] 
10:55:01.180 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:01.181 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:[PID-5-1 EQUALS SMITH] OR [PID-5-1 EQUALS JONES] 
10:55:01.185 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:[PID-5-1 EQUALS JONES] OR [PID-5-1 EQUALS SMITH] 
10:55:01.195 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:[PID-5-1 EQUALS JONES] OR [PID-5-1 EQUALS JONES] 
10:55:01.214 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:01.216 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null PASSED the filter:[PID-5-1 EQUALS SMITH] AND [[PID-5-2 EQUALS JOHN] OR [PID-5-2 EQUALS JON]] 
10:55:01.230 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange null FAILED the filter:[PID-5-1 EQUALS SMITH] AND [[PID-5-2 EQUALS JOHN] AND [PID-5-2 EQUALS JON]] 
10:55:01.322 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] 
10:55:01.327 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@76ffc17c, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a8fb023, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@26d73519, org.springframework.test.context.support.DirtiesContextTestExecutionListener@48af5f38, org.springframework.test.context.transaction.TransactionalTestExecutionListener@40538370, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@71a2df1, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@18faaff6, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2a9e754e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@760a2b6e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@20a9f5fb, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6d617b07, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@340c57e0] 
10:55:01.346 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [HL7FiltersTest-context.xml] 
10:55:01.666 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:01.892 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:55:01.892 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@137a4b54: startup date [Wed Oct 18 10:55:01 EDT 2017]; root of context hierarchy 
10:55:01.905 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:55:02.121 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camel]. 
10:55:02.122 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camel]. 
10:55:02.122 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is starting 
10:55:02.123 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:55:02.125 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:02.167 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:02.378 [main] INFO  o.a.camel.spring.SpringCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html 
10:55:02.382 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _route1 started and consuming from: direct://start 
10:55:02.383 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _testHL7RouteLastName started and consuming from: direct://hl71 
10:55:02.383 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _testHL7RouteNotCalifornia started and consuming from: direct://hl7NotCA 
10:55:02.383 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _route3 started and consuming from: direct://start_preg 
10:55:02.383 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _testHL7RoutePregnant started and consuming from: direct://hl7Preg 
10:55:02.383 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _route2 started and consuming from: direct://start_fn 
10:55:02.383 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _testHL7RouteFoodNet started and consuming from: direct://hl7FN 
10:55:02.383 [main] INFO  o.a.camel.spring.SpringCamelContext - Total 7 routes, of which 7 are started. 
10:55:02.384 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) started in 0.261 seconds 
10:55:02.586 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE1_testQueueProducer_rec_0 FAILED the filter:PID-5-1 EQUALS SMITH 
10:55:02.647 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE1_testQueueProducer_rec_1 FAILED the filter:PID-5-1 EQUALS SMITH 
10:55:02.654 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE1_testQueueProducer_rec_2 FAILED the filter:PID-5-1 EQUALS SMITH 
10:55:02.668 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:02.733 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-4 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-2). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Message may not be nullMessage History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [       322][_route1           ] [_to1              ] [direct:hl71                                                                   ] [        30][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [        24][_testHL7RouteLastN] [_removeHeader1    ] [removeHeader[HL7Filter]                                                       ] [         0][_route1           ] [_to2              ] [mock:mock_endpoint                                                            ] [         1][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        67][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        67][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [        65]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- java.lang.NullPointerException: Message may not be null 	at ca.uhn.hl7v2.util.Terser.<init>(Terser.java:124) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:42) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.testHapiFiltersLastName(HL7FiltersTest.java:116) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) 
10:55:02.737 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint is satisfied 
10:55:02.737 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint_smith is satisfied 
10:55:02.751 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:02.751 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Testing done: testHapiFiltersLastName(gov.cdc.sdp.cbr.HL7FiltersTest) 
10:55:02.751 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Took: 0.354 seconds (354 millis) 
10:55:02.754 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:02.819 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [        19][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [         6][_route1           ] [_to3              ] [direct:hl71                                                                   ] [         6][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.834 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [        37][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.844 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [        46][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.883 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [        61][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.891 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [        94][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.920 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [       123][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [        13]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.934 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [       130][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [        13][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.939 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [       142][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [        13][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.951 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [       154][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [        13][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.964 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-9 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-10). Exhausted after delivery attempt: 1 caught: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000|||||MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISOPID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NNDOBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||FOBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222Message History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route1           ] [_route1           ] [                                                                              ] [       167][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         9][_route1           ] [_when1            ] [when[simple{body.trim().startsWith("FHS")}]                                   ] [         5][_route1           ] [_otherwise1       ] [direct:hl71otherwise[mock:mock_endpointotherwise[]                            ] [        18][_route1           ] [_to3              ] [direct:hl71                                                                   ] [        18][_testHL7RouteLastN] [_setHeader1       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteLastN] [_filter1          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [        13][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0][_route1           ] [setHeaders        ] [ref:myProcessor                                                               ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: ca.uhn.hl7v2.model.Message with value  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|^^|The Iowa Division ^2.16.840.1.114222.4.1.3635^ISO|39130010134019+0-32400000||||| MSH|^~\&|SendAppName^2.16.840.1.114222.TBD^ISO|Sending-Facility^2.16.840.1.114222.TBD^ISO|PHINCDS^2.16.840.1.114222.4.3.2.10^ISO|PHIN^2.16.840.1.114222^ISO|20141225120030.1234-0500||ORU^R01^ORU_R01|TM_CN_TC01_GENV2|T|2.5.1|||||||||NOTF_ORU_v3.0^PHINProfileID^2.16.840.1.114222.4.10.3^ISO~Generic_MMG_V2.0^PHINMsgMapID^2.16.840.1.114222.4.10.4^ISO PID|1||LocalidDEM197^^^SendAppName&2.16.840.1.114222.GENv2&ISO||~^^^^^^S||19640502|F||2106-3^White^CDCREC^C^Caucasian^L~1002-5^American Indian or Alaska Native^CDCREC|^^^48&Texas&CDCREC^77018^^^^48201&Harris&CDCREC|||||||||||2135-2^Hispanic or Latino^CDCREC|||||||20140302 OBR|1|""|SAI^SendAppName^2.16.840.1.114222.TBD^ISO|68991-9^Epidemiologic Information^LN|||20140227170100|||||||||||||||20140227170100|||F||||||10440^Plague^NND OBX|1|ST|32624-9^Other Race Text^LN||Asian^Multi-Racial||||||F OBX|... [Body clipped after 1000 chars, total length is 13240] due ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:78) 	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:53) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:40) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.modelFailure(HL7FiltersTest.java:83) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) Caused by: org.apache.camel.RuntimeCamelException: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1763) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1358) 	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:306) 	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) 	... 80 common frames omitted Caused by: ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is:  BHS|^~\&|^^|The Iowa Division ^2.16.840.1.114222 	at ca.uhn.hl7v2.parser.Parser.parse(Parser.java:201) 	at ca.uhn.hl7v2.parser.GenericParser.parse(GenericParser.java:253) 	at org.apache.camel.component.hl7.HL7Converter.parse(HL7Converter.java:61) 	at org.apache.camel.component.hl7.HL7Converter.toMessage(HL7Converter.java:52) 	at sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1354) 	... 83 common frames omitted 
10:55:02.981 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint is satisfied 
10:55:02.982 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:02.985 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Testing done: modelFailure(gov.cdc.sdp.cbr.HL7FiltersTest) 
10:55:02.986 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Took: 0.198 seconds (198 millis) 
10:55:02.986 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:03.173 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:03.222 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE3_testQueueProducer_rec_0 PASSED the filter:*(OBSERVATION(*)/OBX-3-2 CONTAINS Pregnancy) 
10:55:03.349 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE3_testQueueProducer_rec_1 PASSED the filter:*(OBSERVATION(*)/OBX-3-2 CONTAINS Pregnancy) 
10:55:03.422 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE3_testQueueProducer_rec_2 PASSED the filter:*(OBSERVATION(*)/OBX-3-2 CONTAINS Pregnancy) 
10:55:03.423 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-14 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-12). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Message may not be nullMessage History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route3           ] [_route3           ] [                                                                              ] [       389][_route3           ] [_to31             ] [direct:hl7Preg                                                                ] [       175][_testHL7RoutePregn] [_setHeader5       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RoutePregn] [_filter3          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [       165][_testHL7RoutePregn] [_to7              ] [mock:mock_endpoint_smith                                                      ] [         0][_testHL7RoutePregn] [_removeHeader5    ] [removeHeader[HL7Filter]                                                       ] [         0][_route3           ] [_to32             ] [mock:mock_endpoint                                                            ] [         0][_route3           ] [_otherwise3       ] [direct:hl7Pregotherwise[mock:mock_endpointotherwise[]                         ] [         1][_route3           ] [_to33             ] [direct:hl7Preg                                                                ] [         1][_testHL7RoutePregn] [_setHeader5       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RoutePregn] [_filter3          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         1]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- java.lang.NullPointerException: Message may not be null 	at ca.uhn.hl7v2.util.Terser.<init>(Terser.java:124) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:42) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.processRepetitions(HL7Terser.java:126) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:49) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.testHapiFilterOBXPregnancy(HL7FiltersTest.java:215) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) 
10:55:03.427 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint is satisfied 
10:55:03.427 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint_smith is satisfied 
10:55:03.428 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:03.432 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Testing done: testHapiFilterOBXPregnancy(gov.cdc.sdp.cbr.HL7FiltersTest) 
10:55:03.432 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Took: 0.410 seconds (410 millis) 
10:55:03.432 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:03.489 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE2_testQueueProducer_rec_0 FAILED the filter:*(/.MSH-21(*)-1 EQUALS FDD_MMG_V1.0) 
10:55:03.529 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE2_testQueueProducer_rec_1 FAILED the filter:*(/.MSH-21(*)-1 EQUALS FDD_MMG_V1.0) 
10:55:03.543 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE2_testQueueProducer_rec_2 PASSED the filter:*(/.MSH-21(*)-1 EQUALS FDD_MMG_V1.0) 
10:55:03.553 [main] ERROR o.a.c.processor.DefaultErrorHandler - Failed delivery for (MessageId: ID-troy-VirtualBox-40105-1508338459981-20-22 on ExchangeId: ID-troy-VirtualBox-40105-1508338459981-20-20). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Message may not be nullMessage History---------------------------------------------------------------------------------------------------------------------------------------RouteId              ProcessorId          Processor                                                                        Elapsed (ms)[_route2           ] [_route2           ] [                                                                              ] [       115][_route2           ] [_to21             ] [direct:hl7FN                                                                  ] [        32][_testHL7RouteFoodN] [_setHeader7       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteFoodN] [_filter4          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [        31][_testHL7RouteFoodN] [_removeHeader7    ] [removeHeader[HL7Filter]                                                       ] [         0][_route2           ] [_to22             ] [mock:mock_endpoint                                                            ] [         0][_route2           ] [_otherwise2       ] [direct:hl7FNotherwise[mock:mock_endpointotherwise[]                           ] [         4][_route2           ] [_to23             ] [direct:hl7FN                                                                  ] [         4][_testHL7RouteFoodN] [_setHeader7       ] [setHeader[HL7Filter]                                                          ] [         0][_testHL7RouteFoodN] [_filter4          ] [filter[bean[gov.cdc.sdp.cbr.HL7Terser method:filter]]                         ] [         0]Stacktrace--------------------------------------------------------------------------------------------------------------------------------------- java.lang.NullPointerException: Message may not be null 	at ca.uhn.hl7v2.util.Terser.<init>(Terser.java:124) 	at org.apache.camel.component.hl7.TerserLanguage$1.evaluate(TerserLanguage.java:42) 	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) 	at org.apache.camel.model.language.ExpressionDefinition.evaluate(ExpressionDefinition.java:126) 	at org.apache.camel.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:60) 	at org.apache.camel.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:50) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:72) 	at gov.cdc.sdp.cbr.HL7Terser.processRepetitions(HL7Terser.java:126) 	at gov.cdc.sdp.cbr.HL7Terser.processTerm(HL7Terser.java:49) 	at gov.cdc.sdp.cbr.HL7Terser.filter(HL7Terser.java:26) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:435) 	at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:286) 	at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:259) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) 	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) 	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:69) 	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:211) 	at org.apache.camel.language.bean.BeanExpression.evaluate(BeanExpression.java:126) 	at org.apache.camel.language.bean.BeanExpression.matches(BeanExpression.java:148) 	at org.apache.camel.processor.FilterProcessor.matches(FilterProcessor.java:65) 	at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:51) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) 	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62) 	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) 	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) 	at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) 	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) 	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:209) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:139) 	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:374) 	at gov.cdc.sdp.cbr.HL7FiltersTest.testHapiFiltersFoodNet(HL7FiltersTest.java:182) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:498) 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) 	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) 	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) 	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) 	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) 	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) 	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) 	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) 	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) 	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264) 	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153) 	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124) 	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200) 	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153) 	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103) 
10:55:03.558 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint is satisfied 
10:55:03.558 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint_smith is satisfied 
10:55:03.567 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:03.570 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Testing done: testHapiFiltersFoodNet(gov.cdc.sdp.cbr.HL7FiltersTest) 
10:55:03.571 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Took: 0.132 seconds (132 millis) 
10:55:03.577 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:03.591 [main] INFO  gov.cdc.sdp.cbr.HL7Terser - Exchange _ROUTE1_testQueueProducer_rec PASSED the filter:PID-5-1 EQUALS SMITH 
10:55:03.592 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint is satisfied 
10:55:03.592 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://mock_endpoint_smith is satisfied 
10:55:03.596 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:03.596 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Testing done: testHapiFiltersLastNameSmith(gov.cdc.sdp.cbr.HL7FiltersTest) 
10:55:03.596 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - Took: 0.017 seconds (17 millis) 
10:55:03.596 [main] INFO  gov.cdc.sdp.cbr.HL7FiltersTest - ******************************************************************************** 
10:55:03.634 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] 
10:55:03.634 [main] INFO  o.a.c.t.s.CamelTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@97beeaf, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5d68954d, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@f793f15, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3ec7eb5, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5534e6f1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@4c6fc3e7, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@aa8dce8, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6ad112de, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@18a0721b, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@2ae2fa13, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@66e12c3b, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@44485db] 
10:55:03.635 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [PhinMSDBTest-context.xml] 
10:55:03.681 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:04.102 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Disabling Camel JMX globally for tests by default.  Use the DisableJMX annotation to override the default setting. 
10:55:04.106 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@1f6f0fe2: startup date [Wed Oct 18 10:55:04 EDT 2017]; root of context hierarchy 
10:55:04.113 [main] INFO  o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
10:55:04.189 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:04.315 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Setting shutdown timeout to [10 SECONDS] on CamelContext with name [camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c]. 
10:55:04.321 [main] INFO  o.a.c.t.s.CamelSpringTestContextLoader - Starting CamelContext with name [camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c]. 
10:55:04.321 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) is starting 
10:55:04.321 [main] INFO  o.a.c.m.DefaultManagementStrategy - JMX is disabled 
10:55:04.324 [main] INFO  o.a.c.i.c.DefaultTypeConverter - Loaded 211 type converters 
10:55:04.405 [main] INFO  o.a.camel.spring.SpringCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html 
10:55:04.415 [main] INFO  o.a.camel.spring.SpringCamelContext - Route: _route1 started and consuming from: direct://phinms 
10:55:04.416 [main] INFO  o.a.camel.spring.SpringCamelContext - Total 1 routes, of which 1 are started. 
10:55:04.416 [main] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) started in 0.095 seconds 
10:55:04.696 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:05.201 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:05.702 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:06.208 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:06.709 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:07.211 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:07.715 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:08.216 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:08.418 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://phinmsDb is satisfied 
10:55:08.717 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:08.971 [main] INFO  gov.cdc.sdp.cbr.PhinMSDBTest - ******************************************************************************** 
10:55:08.972 [main] INFO  gov.cdc.sdp.cbr.PhinMSDBTest - Testing done: testPhinMSProducer(gov.cdc.sdp.cbr.PhinMSDBTest) 
10:55:08.972 [main] INFO  gov.cdc.sdp.cbr.PhinMSDBTest - Took: 4.544 seconds (4544 millis) 
10:55:08.972 [main] INFO  gov.cdc.sdp.cbr.PhinMSDBTest - ******************************************************************************** 
10:55:09.221 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:09.722 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:10.224 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:10.726 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:10.950 [main] INFO  o.a.c.component.mock.MockEndpoint - Asserting: mock://phinmsDb is satisfied 
10:55:11.230 [Camel (camel) thread #0 - sql://select%20*%20from%20testdb%20where%20status='new'] WARN  o.a.camel.component.sql.SqlConsumer - Consumer Consumer[sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId] failed polling endpoint: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId. Will try again at next poll. Caused by: [org.springframework.jdbc.CannotGetJdbcConnectionException - Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.)] org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:619) 	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662) 	at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168) 	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175) 	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102) 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) 	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) 	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111) 	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77) 	... 12 common frames omitted Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections. 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:265) 	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54) 	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:218) 	at org.postgresql.Driver.makeConnection(Driver.java:407) 	at org.postgresql.Driver.connect(Driver.java:275) 	at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38) 	at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) 	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) 	at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) 	... 16 common frames omitted Caused by: java.net.ConnectException: Connection refused (Connection refused) 	at java.net.PlainSocketImpl.socketConnect(Native Method) 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) 	at java.net.Socket.connect(Socket.java:589) 	at org.postgresql.core.PGStream.<init>(PGStream.java:64) 	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:147) 	... 24 common frames omitted 
10:55:11.420 [main] INFO  gov.cdc.sdp.cbr.PhinMSDBTest - ******************************************************************************** 
10:55:11.420 [main] INFO  gov.cdc.sdp.cbr.PhinMSDBTest - Testing done: testPhinMSProducerMultiLine(gov.cdc.sdp.cbr.PhinMSDBTest) 
10:55:11.420 [main] INFO  gov.cdc.sdp.cbr.PhinMSDBTest - Took: 2.447 seconds (2447 millis) 
10:55:11.420 [main] INFO  gov.cdc.sdp.cbr.PhinMSDBTest - ******************************************************************************** 
10:55:11.442 [Thread-12] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@1f6f0fe2: startup date [Wed Oct 18 10:55:04 EDT 2017]; root of context hierarchy 
10:55:11.442 [Thread-6] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@1bd8afc8: startup date [Wed Oct 18 10:54:53 EDT 2017]; root of context hierarchy 
10:55:11.442 [Thread-10] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@5beb6be2: startup date [Wed Oct 18 10:54:57 EDT 2017]; root of context hierarchy 
10:55:11.442 [Thread-9] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@42aa1324: startup date [Wed Oct 18 10:54:56 EDT 2017]; root of context hierarchy 
10:55:11.443 [Thread-4] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@2f20f7ad: startup date [Wed Oct 18 10:54:41 EDT 2017]; root of context hierarchy 
10:55:11.443 [Thread-1] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@740773a3: startup date [Wed Oct 18 10:54:19 EDT 2017]; root of context hierarchy 
10:55:11.443 [Thread-7] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@6dd79214: startup date [Wed Oct 18 10:54:54 EDT 2017]; root of context hierarchy 
10:55:11.443 [Thread-5] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@6f6cc7da: startup date [Wed Oct 18 10:54:52 EDT 2017]; root of context hierarchy 
10:55:11.443 [Thread-8] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@1cee2e10: startup date [Wed Oct 18 10:54:55 EDT 2017]; root of context hierarchy 
10:55:11.478 [Thread-11] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@137a4b54: startup date [Wed Oct 18 10:55:01 EDT 2017]; root of context hierarchy 
10:55:11.479 [Thread-12] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) is shutting down 
10:55:11.479 [Thread-12] INFO  o.a.c.impl.DefaultShutdownStrategy - Starting to graceful shutdown 1 routes (timeout 10 seconds) 
10:55:11.487 [Thread-4] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:55:11.487 [Thread-4] INFO  o.a.c.impl.DefaultShutdownStrategy - Starting to graceful shutdown 2 routes (timeout 10 seconds) 
10:55:11.487 [Thread-1] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:55:11.487 [Thread-1] INFO  o.a.c.impl.DefaultShutdownStrategy - Starting to graceful shutdown 2 routes (timeout 10 seconds) 
10:55:11.499 [Thread-11] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutting down 
10:55:11.499 [Thread-11] INFO  o.a.c.impl.DefaultShutdownStrategy - Starting to graceful shutdown 7 routes (timeout 10 seconds) 
10:55:11.512 [Camel (camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) thread #3 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _route1 shutdown complete, was consuming from: direct://phinms 
10:55:11.513 [Thread-12] INFO  o.a.c.impl.DefaultShutdownStrategy - Graceful shutdown of 1 routes completed in 0 seconds 
10:55:11.527 [Camel (camel) thread #5 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: email_sending_test_route_sql2 shutdown complete, was consuming from: sql://select%20*%20from%20testdb%20where%20status='new'?dataSource=sdpqDataSource&onConsume=update+testdb+set+status%3D%27consumed%27+where+recordId%3D%3A%23recordId&onConsumeFailed=update+testdb+set+status%3D%27consumeFailed%27+where+recordId%3D%3A%23recordId 
10:55:11.527 [Camel (camel) thread #5 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: email_sending_test_route shutdown complete, was consuming from: direct://start 
10:55:11.528 [Camel (camel) thread #4 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: foodNetFilter shutdown complete, was consuming from: direct://idempotence 
10:55:11.528 [Camel (camel) thread #4 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: PHINMS shutdown complete, was consuming from: direct://start 
10:55:11.528 [Thread-1] INFO  o.a.c.impl.DefaultShutdownStrategy - Graceful shutdown of 2 routes completed in 0 seconds 
10:55:11.528 [Thread-4] INFO  o.a.c.impl.DefaultShutdownStrategy - Graceful shutdown of 2 routes completed in 0 seconds 
10:55:11.538 [Thread-1] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 50.588 seconds 
10:55:11.538 [Thread-1] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.051 seconds 
10:55:11.552 [Thread-4] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 29.950 seconds 
10:55:11.552 [Thread-4] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.065 seconds 
10:55:11.554 [Thread-12] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) uptime 7.233 seconds 
10:55:11.554 [Thread-12] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camelContext-06e68a1a-58d8-48f7-8348-f79c7362486c) is shutdown in 0.075 seconds 
10:55:11.555 [Camel (camel) thread #6 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _testHL7RouteFoodNet shutdown complete, was consuming from: direct://hl7FN 
10:55:11.562 [Camel (camel) thread #6 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _route2 shutdown complete, was consuming from: direct://start_fn 
10:55:11.562 [Camel (camel) thread #6 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _testHL7RoutePregnant shutdown complete, was consuming from: direct://hl7Preg 
10:55:11.562 [Camel (camel) thread #6 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _route3 shutdown complete, was consuming from: direct://start_preg 
10:55:11.564 [Camel (camel) thread #6 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _testHL7RouteNotCalifornia shutdown complete, was consuming from: direct://hl7NotCA 
10:55:11.564 [Camel (camel) thread #6 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _testHL7RouteLastName shutdown complete, was consuming from: direct://hl71 
10:55:11.564 [Camel (camel) thread #6 - ShutdownTask] INFO  o.a.c.impl.DefaultShutdownStrategy - Route: _route1 shutdown complete, was consuming from: direct://start 
10:55:11.570 [Thread-11] INFO  o.a.c.impl.DefaultShutdownStrategy - Graceful shutdown of 7 routes completed in 0 seconds 
10:55:11.572 [Thread-11] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) uptime 9.450 seconds 
10:55:11.572 [Thread-11] INFO  o.a.camel.spring.SpringCamelContext - Apache Camel 2.18.1.redhat-000012 (CamelContext: camel) is shutdown in 0.073 seconds 
